body, #root {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  width: 100%;
  box-sizing: border-box;
  background: #f5f6fa;
  font-family: Inter, Arial, sans-serif;
  overflow-x: hidden;
}

/* ONE source of truth for layout width */
.page-shell {
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
}

:root {
  --card-pad: 2rem; /* same as .dashboard-card padding */
}

.top-bar {
  position: sticky;
  top: 0;
  z-index: 10;

  background: #fff;
  border-radius: 18px;
  box-shadow: 0 8px 32px rgba(0,0,0,.12);

  /* match card inner padding so text lines up with card titles */
  padding: 1rem var(--card-pad);

  display: flex;
  align-items: center;
  gap: 1rem;

  width: 100%;
  margin: 0 0 1.5rem; /* no auto-centering here; page-shell does that */
}

.topbar-left {
  display: flex;
  align-items: center;
  gap: 0;                          /* no extra space before title */
  margin: 0;
}

.topbar-title {
  font-size: 1.8rem;
  font-weight: 700;
  color: #333840;
  margin: 0;                       /* zero left margin */
}

.topbar-right {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-left: auto;      /* stays on the far right */
}

.topbar-cal { font-size: 1.5rem; color: #005CB8; }
.topbar-date { font-size: 1.5rem; font-weight: 600; color: #005CB8; }

/* global (good to have) */
* { box-sizing: border-box; }

.topbar-logo { display: none !important; }
.topbar-brand { display: none !important; }
.topbar-left { gap: 0; }          /* just in case a gap was set earlier */
.topbar-left > * { margin: 0; }   /* remove stray margins on children */

.dashboard-container {
  min-height: 100vh;
  width: 100%;
  padding: 2rem 2rem 4rem 2rem; /* page margin with extra bottom padding */
  background: #f5f6fa;
  overflow-x: hidden; /* Prevent horizontal overflow */
}

/* Remove max-width/margins from the grid */
.dashboard-grid {
  width: 100%;
  margin: 0 0 2rem 0;           /* add bottom margin for breathing room */
  max-width: none;               /* important */
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

/* Use the same 12-col track for BOTH rows so edges align perfectly */
.top-row,
.bottom-row {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 2rem;
}

/* Top row: three equal cards = 4/12 each */
.top-row > * { grid-column: span 4; }

/* Bottom row: left card = 4/12, chart card = 8/12 (spans 2 cards) */
.bottom-row > *:first-child { grid-column: span 4; }
.bottom-row > *:last-child { grid-column: span 8; }

/* Chart card styling for the bottom right card that spans 2 columns */
.chart-card {
  grid-column: span 8;
}

.dashboard-card {
  background: #fff;
  border-radius: 18px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  padding: 2rem;
  display: flex;
  flex-direction: column;
  position: relative;
  overflow: visible;
  flex: 1;
}

.card-title {
  margin: 0 0 1.5rem 0;
  font-size: 1.4rem;
  color: #333840;
  font-weight: 700;
  letter-spacing: -0.5px;
}

.card-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.date-display, .count-display {
  display: inline-flex;
  align-items: center; /* center icon with number/date */
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.calendar-icon, .alert-icon {
  width: 2rem;
  height: 2rem;
  flex-shrink: 0;
}

.material-symbols-rounded {
  font-family: 'Material Symbols Rounded';
  font-style: normal;
  font-weight: 400;
  font-size: 2rem; /* base size; override in contexts below */
  font-variation-settings:
    'FILL' 0,
    'wght' 400,
    'GRAD' 0,
    'opsz' 24;
  line-height: 1;
  color: #005CB8;
}

/* Make icons match the large number size next to them */
.count-display .material-symbols-rounded,
.date-display .material-symbols-rounded {
  font-size: 3.2rem; /* reduced from 4rem to be more moderate */
  line-height: 1;
}

.date-text, .count-number {
  font-size: 3.2rem; /* reduced from 4rem to be more moderate */
  font-weight: 700;
  color: #005CB8;
  line-height: 1;
}

/* Specific elements marked in red in the image should be this color */
.date-display .date-text,
.date-display .material-symbols-rounded,
.count-display.reclamations-year .count-number,
.count-display.reclamations-year .material-symbols-rounded {
  color: #DC1C18;
}

/* Special styling for the most important numbers (days since previous and longest streak) */
.count-display:not(.date-display):not(.reclamations-year) .material-symbols-rounded,
.count-display:not(.date-display):not(.reclamations-year) .count-number {
  font-size: 4.5rem; /* significantly bigger for the most important numbers */
}

/* fine-tune baseline alignment for numbers next to icons */
.count-number, .date-text {
  line-height: 1.05; /* slight increase to better center with icon */
}

/* Longest streak count display - uses column layout for number + date */
.count-display.longest-streak {
  flex-direction: column;
  align-items: flex-start;
  gap: 0.5rem;
}

.count-display.longest-streak .material-symbols-rounded {
  align-self: flex-start;
  font-size: 4.5rem; /* match the bigger size for important numbers */
}

/* Row for icon and number within the longest streak card */
.icon-number-row {
  display: flex;
  align-items: center;
  gap: 0.75rem; /* Gap between icon and number */
}

/* force the % and caption to render tightly together */
.trend-block {
  display: grid;            /* grid is great for vertical rhythm */
  row-gap: 0.5rem;          /* exact spacing between % and caption */
}

.trend-delta {
  margin: 0;
  font-weight: 700;
  font-size: 1.8rem;        /* Increased from 1.4rem - bigger % */
  line-height: 1.05;
}

.trend-delta.delta-positive { color: #DC1C18; }
.trend-delta.delta-negative { color: #58D052; }
.trend-delta.delta-neutral { color: #5C636E; }

.trend-caption {
  margin: 0;
  display: block;           /* ensure it renders as a block line */
  color: #5C636E;
  font-size: 1.2rem;        /* Increased from 1rem - bigger labels */
  font-weight: 500;
  line-height: 1.15;
}

.details-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem; /* reduced from 0.8rem for tighter spacing */
}



.detail-item {
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
  padding: 0.5rem 0;
}

.customer-row {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 0.8rem;
  border-bottom: none;
}

.detail-label {
  color: #5C636E;
  font-weight: 500;
  font-size: 1.1rem; /* Increased to match progress-label */
}

.detail-value {
  color: #333840;
  font-weight: 600;
  font-size: 1.1rem; /* Increased to match progress-label */
  line-height: 1.4;
  word-wrap: break-word;
}

.customer-tag {
  display: inline-block;
  background: #f0f0f0;
  color: #333840;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-weight: 600;
  font-size: 1rem;
  line-height: 1.2;
}

.trend-chart {
  flex: 1;
  min-height: 260px; /* reduced height to better fit the card */
  margin: 0.5rem 0 0.5rem 0; /* balanced margins - reduced bottom margin */
  width: 100%;
  display: flex;
  flex-direction: column;
}

.trend-chart .recharts-responsive-container {
  flex: 1;
  min-height: 260px;
}

/* ===================== */
/*  MESSAGE BUBBLE (NEW) */
/* ===================== */

/* Wrapper - now positioned relative to card content */
.message-bubble {
  position: relative;
  top: auto;
  right: auto;

  display: flex;
  align-items: center;
  gap: 1.2rem; /* Increased gap between icon and text */

  padding: 1.8rem 1.4rem; /* Top/bottom: 1.8rem, left/right: 1.4rem */
  max-width: none; /* Remove max width to fill available space */
  min-height: 50px; /* Further reduced minimum height to 50px */
  margin-top: 0; /* Start exactly at client code level */

  border-radius: 18px; /* Slightly larger border radius */
  border: none;                 /* outer border off by default */

  /* let children control typography */
  font-size: initial;
  font-weight: initial;
  
  /* Remove background - let tier classes control it */
  background: transparent;
  
  /* Position at bottom without expanding */
  align-self: flex-end; /* Align to bottom of card */
}

/* Icon container (circle with accent stroke) */
.bubble-icon {
  width: 50px; /* Reduced from 70px for more compact bubble */
  height: 50px; /* Reduced from 70px for more compact bubble */
  border-radius: 50%;
  display: grid;
  place-items: center;
  border: 2px solid var(--bubble-accent, currentColor);
  background: transparent;
}

/* Variant: borderless icon (add 'no-border' to wrapper) */
.message-bubble.no-border .bubble-icon {
  border: none;
  width: auto;
  height: auto;
  border-radius: 0;
  padding: 0;
}

/* Your inline SVGs inside the icon */
.message-symbol {
  width: 35px; /* Reduced from 50px for more compact bubble */
  height: 35px; /* Reduced from 50px for more compact bubble */
  flex-shrink: 0;
  color: var(--bubble-accent, currentColor);
}

/* Two-line text stack */
.bubble-text { display: flex; flex-direction: column; }

.message-title {
  font-weight: 800;
  font-size: 1.6rem; /* Increased from 1.4rem - bigger title */
  line-height: 1.2;
  color: var(--bubble-title, #333840) !important;
}

.message-sub {
  margin-top: 0.2rem; /* Increased from 0.15rem */
  font-weight: 600;
  font-size: 1.3rem; /* Increased from 1.15rem - bigger subtitle */
  line-height: 1.25;
  color: var(--bubble-body, #333840) !important;
}

/* LIGHTER tier skins (set bg + accent + title/body via CSS vars) */
.message-bubble.tier-0   { 
  --bubble-bg: #FDE8E7; 
  --bubble-accent: #dc1c18; 
  --bubble-title: #DC1C18; 
  --bubble-body: #333840; 
  background: var(--bubble-bg) !important; 
}
.message-bubble.tier-10  { 
  --bubble-bg: #F4F5F7; 
  --bubble-accent: #5C636E; 
  --bubble-title: #5C636E; 
  --bubble-body: #333840; 
  background: var(--bubble-bg) !important; 
}
.message-bubble.tier-20  { 
  --bubble-bg: #FFF9E6; 
  --bubble-accent: #DB9E01; 
  --bubble-title: #DB9E01; 
  --bubble-body: #333840; 
  background: var(--bubble-bg) !important; 
}
.message-bubble.tier-30  { 
  --bubble-bg: #E9F8EC; 
  --bubble-accent: #23B22A; 
  --bubble-title: #23B22A; 
  --bubble-body: #333840; 
  background: var(--bubble-bg) !important; 
}
.message-bubble.tier-60  { 
  --bubble-bg: #E6F2FD; 
  --bubble-accent: #005CB8; 
  --bubble-title: #005CB8; 
  --bubble-body: #333840; 
  background: var(--bubble-bg) !important; 
}
.message-bubble.tier-90  { 
  --bubble-bg: #FFEFE5; 
  --bubble-accent: #F95A10; 
  --bubble-title: #F95A10; 
  --bubble-body: #333840; 
  background: var(--bubble-bg) !important; 
}
.message-bubble.tier-120 { 
  --bubble-bg: #F3E9FD; 
  --bubble-accent: #520BEA; 
  --bubble-title: #520BEA; 
  --bubble-body: #333840; 
  background: var(--bubble-bg) !important; 
}

/* Force tier-specific text colors to override any conflicts */
.message-bubble.tier-30 .message-title {
  color: #23B22A !important;
}

.message-bubble.tier-30 .message-sub {
  color: #333840 !important;
}

.message-bubble.tier-20 .message-title {
  color: #DB9E01 !important;
}

.message-bubble.tier-20 .message-sub {
  color: #333840 !important;
}

.progress-section {
  display: flex;
  flex-direction: column;
  gap: 0.5rem; /* Reduced to match first card detail gaps */
  margin-top: 0.2rem; /* Significantly reduced gap from date range */
}

.progress-item {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.progress-label {
  color: #5C636E;
  font-weight: 500;
  font-size: 1.1rem; /* Increased from 0.9rem to match newest reclamation labels */
}

.progress-bar {
  width: 100%;
  height: 12px;
  background: #f0f0f0;
  border-radius: 6px;
  overflow: hidden;
  position: relative;
}

.progress-fill {
  height: 100%;
  border-radius: 6px;
  transition: width 0.3s ease;
}

.current-streak {
  background: linear-gradient(90deg, #005CB8, #027AD1);
}

.progress-text {
  color: #5C636E;
  font-size: 0.8rem;
  font-weight: 500;
  margin-top: 0.3rem;
}

/* Streak date range styling */
.streak-date-range {
  margin: 0; /* Start exactly at client code level */
}

.streak-date-text {
  color: #5C636E;
  font-size: 1.2rem;        /* Slightly bigger than original 1.1rem */
  font-weight: 500;
  line-height: 1.2;
}

.loading, .error {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  font-size: 1.5rem;
  color: #333840;
}

.error {
  color: #932617;
}

/* Responsive adjustments for TV display */
@media (min-width: 1920px) {
  .dashboard-grid {
    max-width: 1600px;
  }
  
  .card-title {
    font-size: 1.6rem;
  }
  
  .date-text, .count-number {
    font-size: 3rem;
  }
  
  .calendar-icon {
    width: 2.5rem;
    height: 2.5rem;
  }
}

@media (max-width: 1366px) {
  .dashboard-grid {
    gap: 1.5rem;
  }
  
  .dashboard-card {
    padding: 1.5rem;
  }
  
  .card-title {
    font-size: 1.2rem;
  }
  
  .date-text, .count-number {
    font-size: 2rem;
  }
  
  .calendar-icon {
    width: 1.8rem;
    height: 1.8rem;
  }
}

/* Reference line label styling - make it bigger */
.recharts-reference-line-label {
  font-size: 14px !important; /* Increased from default size */
  font-weight: 600 !important;
}